<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Examples" href="auto_examples/index.html" /><link rel="prev" title="Overview" href="index.html" />

    <link rel="shortcut icon" href="_static/favicon.ico"/><meta name="generator" content="sphinx-5.1.1, furo 2022.06.21"/>
        <title>API - Trustee 1.1.5 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?digest=40978830699223671f4072448e654b5958f38b89" />
    <link rel="stylesheet" type="text/css" href="_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="_static/sg_gallery-rendered-html.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">Trustee 1.1.5 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="_static/icon.png" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="_static/icon-alt.png" alt="Dark Logo"/>
  </div>
  
  <span class="sidebar-brand-text">Trustee 1.1.5 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">API</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="auto_examples/index.html">Examples</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="auto_examples/trust_regression.html">TrustReport for Regression</a></li>
<li class="toctree-l2"><a class="reference internal" href="auto_examples/trust_classification.html">TrustReport for Classification</a></li>
<li class="toctree-l2"><a class="reference internal" href="auto_examples/regression.html">RegressionTrustee</a></li>
<li class="toctree-l2"><a class="reference internal" href="auto_examples/classification.html">ClassificationTrustee</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="api">
<h1>API<a class="headerlink" href="#api" title="Permalink to this heading">#</a></h1>
<p>This part of the documentation covers all the interfaces of Trustee.  For
parts where Trustee depends on external libraries, we document the most
important right here and provide links to the canonical documentation.</p>
<span class="target" id="module-trustee.main"></span><section id="trustee">
<h2>Trustee<a class="headerlink" href="#trustee" title="Permalink to this heading">#</a></h2>
<p>The core module of the Trustee project</p>
<dl class="py class">
<dt class="sig sig-object py" id="trustee.main.ClassificationTrustee">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">trustee.main.</span></span><span class="sig-name descname"><span class="pre">ClassificationTrustee</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expert</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.ClassificationTrustee" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="#trustee.main.Trustee" title="trustee.main.Trustee"><code class="xref py py-class docutils literal notranslate"><span class="pre">Trustee</span></code></a></p>
<p>Implements the Trust-oriented Decision Tree Extraction (Trustee) algorithm to train
a student DecisionTreeClassifier based on observations from an Expert classification model.</p>
<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.ClassificationTrustee.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expert</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.ClassificationTrustee.__init__" title="Permalink to this definition">#</a></dt>
<dd><p>Classification Trustee constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>expert</strong> (<em>object</em>) – The ML blackbox model to analyze. The expert model must have a <cite>predict</cite> method call implemented for
Trustee to work properly, unless explicitly stated otherwise using the <cite>predict_method_name</cite> argument
in the fit() method.</p></li>
<li><p><strong>logger</strong> (<em>Logger object</em><em> , </em><em>default=None</em>) – A logger object to log messages to. If none is given, the print() method will be used to log messages.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.ClassificationTrustee.explain">
<span class="sig-name descname"><span class="pre">explain</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">top_k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.ClassificationTrustee.explain" title="Permalink to this definition">#</a></dt>
<dd><p>Returns explainable model that best imitates Expert model, based on highest mean agreement and highest fidelity.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><p><strong>top_student</strong> – (dt, pruned_dt, agreement, reward)</p>
<ul class="simple">
<li><dl class="simple">
<dt>dt: {DecisionTreeClassifier, DecisionTreeRegressor}</dt><dd><p>Unconstrained fitted student model.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>pruned_dt: {DecisionTreeClassifier, DecisionTreeRegressor}</dt><dd><p>Top-k pruned fitted student model.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>agreement: float</dt><dd><p>Mean agreement of pruned student model with respect to others.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>reward: float</dt><dd><p>Fidelity of student model to the expert model.</p>
</dd>
</dl>
</li>
</ul>
</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.ClassificationTrustee.fit">
<span class="sig-name descname"><span class="pre">fit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">top_k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_leaf_nodes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ccp_alpha</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.7</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_iter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_stability_iter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_samples</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">samples_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_features</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">predict_method_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'predict'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optimization</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'fidelity'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aggregate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.ClassificationTrustee.fit" title="Permalink to this definition">#</a></dt>
<dd><p>Trains Decision Tree Regressor to imitate Expert model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>X</strong> (<em>{array-like</em><em>, </em><em>sparse matrix} of shape</em><em> (</em><em>n_samples</em><em>, </em><em>n_features</em><em>)</em>) – The training input samples. Internally, it will be converted to a pandas DataFrame.</p></li>
<li><p><strong>y</strong> (<em>array-like of shape</em><em> (</em><em>n_samples</em><em>,</em><em>) or </em><em>(</em><em>n_samples</em><em>, </em><em>n_outputs</em><em>)</em>) – The target values for X (class labels in classification, real numbers in regression).
Internally, it will be converted to a pandas Series.</p></li>
<li><p><strong>top_k</strong> (<em>int</em><em>, </em><em>default=10</em>) – Number of top-k branches, sorted by number of samples per branch, to keep after finding
decision tree with highest fidelity.</p></li>
<li><p><strong>max_leaf_nodes</strong> (<em>int</em><em>, </em><em>default=None</em>) – Grow a tree with max_leaf_nodes in best-first fashion. Best nodes are defined as
relative reduction in impurity. If None then unlimited number of leaf nodes.</p></li>
<li><p><strong>max_depth</strong> (<em>int</em><em>, </em><em>default=None</em>) – The maximum depth of the tree. If None, then nodes are expanded until all leaves are pure.</p></li>
<li><p><strong>ccp_alpha</strong> (<em>float</em><em>, </em><em>default=0.0</em>) – Complexity parameter used for Minimal Cost-Complexity Pruning. The subtree with the
largest cost complexity that is smaller than ccp_alpha will be chosen. By default,
no pruning is performed. See Minimal Cost-Complexity Pruning here for details:
<a class="reference external" href="https://scikit-learn.org/stable/modules/tree.html#minimal-cost-complexity-pruning">https://scikit-learn.org/stable/modules/tree.html#minimal-cost-complexity-pruning</a></p></li>
<li><p><strong>train_size</strong> (<em>float</em><em> or </em><em>int</em><em>, </em><em>default=0.7</em>) – If float, should be between 0.0 and 1.0 and represent the proportion of the dataset
to include in the train split. If int, represents the absolute number of train samples.</p></li>
<li><p><strong>num_iter</strong> (<em>int</em><em>, </em><em>default=50</em>) – Number of iterations to repeat Trustee inner-loop for.</p></li>
<li><p><strong>num_stability_iter</strong> (<em>int</em><em>, </em><em>default=5</em>) – Number of stability to repeat Trustee stabilization outer-loop for.</p></li>
<li><p><strong>num_samples</strong> (<em>int</em><em>, </em><em>default=2000</em>) – The absolute number of samples to fetch from the training dataset split to train the
student decision tree model. If the <cite>samples_size</cite> argument is provided, this arg is
ignored.</p></li>
<li><p><strong>samples_size</strong> (<em>float</em><em>, </em><em>default=None</em>) – The fraction of the training dataset to use to train the student decision tree model.
If None, the value is automatically set to the <cite>num_samples</cite> provided value.</p></li>
<li><p><strong>use_features</strong> (<em>array-like</em><em>, </em><em>default=None</em>) – Array-like of integers representing the indexes of features from the <cite>X</cite> training samples.
If not None, only the features indicated by the provided indexes will be used to train the
student decision tree model.</p></li>
<li><p><strong>predict_method_name</strong> (<em>str</em><em>, </em><em>default=&quot;predict&quot;</em>) – The method interface to use to get predictions from the expert model.
If no value is passed, the default <cite>predict</cite> interface is used.</p></li>
<li><p><strong>optimization</strong> (<em>{&quot;fidelity&quot;</em><em>, </em><em>&quot;accuracy&quot;}</em><em>, </em><em>default=&quot;fidelity&quot;</em>) – The comparison criteria to optimize the decision tree students in Trustee inner-loop.
Used for ablation study only.</p></li>
<li><p><strong>aggregate</strong> (<em>bool</em><em>, </em><em>default=True</em>) – Boolean indicating whether dataset aggregation should be used in Trustee inner-loop.
Used for ablation study only.</p></li>
<li><p><strong>verbose</strong> (<em>bool</em><em>, </em><em>default=False</em>) – Boolean indicating whether to log messages.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.ClassificationTrustee.get_all_students">
<span class="sig-name descname"><span class="pre">get_all_students</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.ClassificationTrustee.get_all_students" title="Permalink to this definition">#</a></dt>
<dd><p>Get list of all (student, reward) obtained during the inner-loop process.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><p><strong>students_by_iter</strong> – Matrix with all student models trained during <cite>fit()</cite>.</p>
<ul class="simple">
<li><dl class="simple">
<dt>dt: {DecisionTreeClassifier, DecisionTreeRegressor}</dt><dd><p>Unconstrained fitted student model.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>reward: float</dt><dd><p>Fidelity of student model to the expert model.</p>
</dd>
</dl>
</li>
</ul>
</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>array-like of shape (num_stability_iter, num_iter) of tuple (dt, reward)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.ClassificationTrustee.get_leaves_by_level">
<span class="sig-name descname"><span class="pre">get_leaves_by_level</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.ClassificationTrustee.get_leaves_by_level" title="Permalink to this definition">#</a></dt>
<dd><p>Returns number of leaves by level of the best student.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>leaves_by_level</strong> – Dict of leaves by level. {“&lt;level&gt;(int)”: &lt;leaves&gt;(int)}</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>dict of int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.ClassificationTrustee.get_n_classes">
<span class="sig-name descname"><span class="pre">get_n_classes</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.ClassificationTrustee.get_n_classes" title="Permalink to this definition">#</a></dt>
<dd><p>Returns number of classes used in the top student model.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>n_classes</strong> – Number of classes outputted in top student model.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.ClassificationTrustee.get_n_features">
<span class="sig-name descname"><span class="pre">get_n_features</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.ClassificationTrustee.get_n_features" title="Permalink to this definition">#</a></dt>
<dd><p>Returns number of features used in the top student model.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>n_features</strong> – Number of features used in top student model.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.ClassificationTrustee.get_samples_by_level">
<span class="sig-name descname"><span class="pre">get_samples_by_level</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.ClassificationTrustee.get_samples_by_level" title="Permalink to this definition">#</a></dt>
<dd><p>Get number of samples by level of the best student.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>samples_by_level</strong> – Dict of samples by level. {“&lt;level&gt;(int)”: &lt;samples&gt;(int)}</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>dict of int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.ClassificationTrustee.get_samples_sum">
<span class="sig-name descname"><span class="pre">get_samples_sum</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.ClassificationTrustee.get_samples_sum" title="Permalink to this definition">#</a></dt>
<dd><p>Get the sum of all samples in all non-leaf _nodes in best student model.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>samples_sum</strong> – Sum of all samples covered by non-leaf nodes in top student model.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.ClassificationTrustee.get_stable">
<span class="sig-name descname"><span class="pre">get_stable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">top_k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.9</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.ClassificationTrustee.get_stable" title="Permalink to this definition">#</a></dt>
<dd><p>Filters out explanations from Trustee stability analysis with less than threshold agreement.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>top_k</strong> (<em>int</em><em>, </em><em>default=10</em>) – Number of top-k branches, sorted by number of samples per branch, to keep after finding
decision tree with highest fidelity.</p></li>
<li><p><strong>threshold</strong> (<em>float</em><em>, </em><em>default=0.9</em>) – Remove any student decision tree explanation if their mean agreement goes below given threshold.
To keep all students regardless of mean agreement, pass 0.</p></li>
<li><p><strong>sort</strong> (<em>bool</em><em>, </em><em>default=True</em>) – Boolean indicating whether to sort returned stable student explanation based on mean agreement.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p><strong>stable_explanations</strong> – [(dt, pruned_dt, agreement, reward), …]</p>
<ul class="simple">
<li><dl class="simple">
<dt>dt: {DecisionTreeClassifier, DecisionTreeRegressor}</dt><dd><p>Unconstrained fitted student model.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>pruned_dt: {DecisionTreeClassifier, DecisionTreeRegressor}</dt><dd><p>Top-k pruned fitted student model.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>agreement: float</dt><dd><p>Mean agreement of pruned student model with respect to others.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>reward: float</dt><dd><p>Fidelity of student model to the expert model.</p>
</dd>
</dl>
</li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>array-like of tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.ClassificationTrustee.get_top_branches">
<span class="sig-name descname"><span class="pre">get_top_branches</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">top_k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.ClassificationTrustee.get_top_branches" title="Permalink to this definition">#</a></dt>
<dd><p>Returns list of top-k _branches of the best student, sorted by the number of samples the branch classifies.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>top_k</strong> (<em>int</em><em>, </em><em>default=10</em>) – Number of top-k branches, sorted by number of samples per branch, to return.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p><strong>top_branches</strong> – Dict of top-k branches from top student model.</p>
<ul class="simple">
<li><p>dict: { “level”: int, “path”: array-like of dict, “class”: int, “prob”: float, “samples”: int}</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>array-like of dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.ClassificationTrustee.get_top_features">
<span class="sig-name descname"><span class="pre">get_top_features</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">top_k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.ClassificationTrustee.get_top_features" title="Permalink to this definition">#</a></dt>
<dd><p>Get list of top _features of the best student, sorted by the number of samples the feature is used to classify.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>top_k</strong> (<em>int</em><em>, </em><em>default=10</em>) – Number of top-k features, sorted by number of samples per branch, to return.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p><strong>top_features</strong> – List of top-k features from top student model.</p>
<ul class="simple">
<li><p>dict {“&lt;feature&gt;(int)” : {“count”: int”samples”: int}}</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>array-like of dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.ClassificationTrustee.get_top_nodes">
<span class="sig-name descname"><span class="pre">get_top_nodes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">top_k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.ClassificationTrustee.get_top_nodes" title="Permalink to this definition">#</a></dt>
<dd><p>Returns list of top _nodes of the best student, sorted by the proportion of samples split by each node.</p>
<dl class="simple">
<dt>The proportion of samples is calculated based on the impurity decrease equation is the following::</dt><dd><p>n_samples * abs(left_impurity - right_impurity)</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>top_k</strong> (<em>int</em><em>, </em><em>default=10</em>) – Number of top-k nodes, sorted by number of samples per branch, to return.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p><strong>top_nodes</strong> – List of top-k nodes from top student model.</p>
<ul class="simple">
<li><dl class="simple">
<dt>dict: {“idx”: int, “level”: int, “feature”: int, “threshold”: float, “samples”: int,</dt><dd><p>”values”: tuple of int, “gini_split”: tuple of float, “data_split”: tuple of float,
“data_split_by_class”: array-like of tuple of float}</p>
</dd>
</dl>
</li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>array-like of dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.ClassificationTrustee.get_top_students">
<span class="sig-name descname"><span class="pre">get_top_students</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.ClassificationTrustee.get_top_students" title="Permalink to this definition">#</a></dt>
<dd><p>Get list of top (students, reward) obtained during the outer-loop process.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><p><strong>top_students</strong> – List with top student models trained during <cite>fit()</cite>.</p>
<ul class="simple">
<li><dl class="simple">
<dt>dt: {DecisionTreeClassifier, DecisionTreeRegressor}</dt><dd><p>Unconstrained fitted student model.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>reward: float</dt><dd><p>Fidelity of student model to the expert model.</p>
</dd>
</dl>
</li>
</ul>
</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>array-like of shape (num_stability_iter,) of tuple (dt, reward)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.ClassificationTrustee.prune">
<span class="sig-name descname"><span class="pre">prune</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">top_k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_impurity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.ClassificationTrustee.prune" title="Permalink to this definition">#</a></dt>
<dd><p>Prunes and returns the best student model explanation from the list of _students_by_iter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>top_k</strong> (<em>int</em><em>, </em><em>default=10</em>) – Number of top-k branches, sorted by number of samples per branch, to return.</p></li>
<li><p><strong>max_impurity</strong> (<em>float</em><em>, </em><em>default=0.10</em>) – Maximum impurity allowed in a branch. Will prune anything below that impurity level.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>top_k_pruned_student</strong> – Top-k pruned best fitted student model.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>{DecisionTreeClassifier, DecisionTreeRegressor}</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="trustee.main.RegressionTrustee">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">trustee.main.</span></span><span class="sig-name descname"><span class="pre">RegressionTrustee</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expert</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.RegressionTrustee" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <a class="reference internal" href="#trustee.main.Trustee" title="trustee.main.Trustee"><code class="xref py py-class docutils literal notranslate"><span class="pre">Trustee</span></code></a></p>
<p>Implements the Trust-oriented Decision Tree Extraction (Trustee) algorithm to train a
student DecisionTreeRegressor based on observations from an Expert regression model.</p>
<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.RegressionTrustee.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expert</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.RegressionTrustee.__init__" title="Permalink to this definition">#</a></dt>
<dd><p>Regression Trustee constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>expert</strong> (<em>object</em>) – The ML blackbox model to analyze. The expert model must have a <cite>predict</cite> method call implemented for
Trustee to work properly, unless explicitly stated otherwise using the <cite>predict_method_name</cite> argument
in the fit() method.</p></li>
<li><p><strong>logger</strong> (<em>Logger object</em><em> , </em><em>default=None</em>) – A logger object to log messages to. If none is given, the print() method will be used to log messages.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.RegressionTrustee.explain">
<span class="sig-name descname"><span class="pre">explain</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">top_k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.RegressionTrustee.explain" title="Permalink to this definition">#</a></dt>
<dd><p>Returns explainable model that best imitates Expert model, based on highest mean agreement and highest fidelity.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><p><strong>top_student</strong> – (dt, pruned_dt, agreement, reward)</p>
<ul class="simple">
<li><dl class="simple">
<dt>dt: {DecisionTreeClassifier, DecisionTreeRegressor}</dt><dd><p>Unconstrained fitted student model.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>pruned_dt: {DecisionTreeClassifier, DecisionTreeRegressor}</dt><dd><p>Top-k pruned fitted student model.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>agreement: float</dt><dd><p>Mean agreement of pruned student model with respect to others.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>reward: float</dt><dd><p>Fidelity of student model to the expert model.</p>
</dd>
</dl>
</li>
</ul>
</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.RegressionTrustee.fit">
<span class="sig-name descname"><span class="pre">fit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">top_k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_leaf_nodes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ccp_alpha</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.7</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_iter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_stability_iter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_samples</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">samples_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_features</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">predict_method_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'predict'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optimization</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'fidelity'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aggregate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.RegressionTrustee.fit" title="Permalink to this definition">#</a></dt>
<dd><p>Trains Decision Tree Regressor to imitate Expert model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>X</strong> (<em>{array-like</em><em>, </em><em>sparse matrix} of shape</em><em> (</em><em>n_samples</em><em>, </em><em>n_features</em><em>)</em>) – The training input samples. Internally, it will be converted to a pandas DataFrame.</p></li>
<li><p><strong>y</strong> (<em>array-like of shape</em><em> (</em><em>n_samples</em><em>,</em><em>) or </em><em>(</em><em>n_samples</em><em>, </em><em>n_outputs</em><em>)</em>) – The target values for X (class labels in classification, real numbers in regression).
Internally, it will be converted to a pandas Series.</p></li>
<li><p><strong>top_k</strong> (<em>int</em><em>, </em><em>default=10</em>) – Number of top-k branches, sorted by number of samples per branch, to keep after finding
decision tree with highest fidelity.</p></li>
<li><p><strong>max_leaf_nodes</strong> (<em>int</em><em>, </em><em>default=None</em>) – Grow a tree with max_leaf_nodes in best-first fashion. Best nodes are defined as
relative reduction in impurity. If None then unlimited number of leaf nodes.</p></li>
<li><p><strong>max_depth</strong> (<em>int</em><em>, </em><em>default=None</em>) – The maximum depth of the tree. If None, then nodes are expanded until all leaves are pure.</p></li>
<li><p><strong>ccp_alpha</strong> (<em>float</em><em>, </em><em>default=0.0</em>) – Complexity parameter used for Minimal Cost-Complexity Pruning. The subtree with the
largest cost complexity that is smaller than ccp_alpha will be chosen. By default,
no pruning is performed. See Minimal Cost-Complexity Pruning here for details:
<a class="reference external" href="https://scikit-learn.org/stable/modules/tree.html#minimal-cost-complexity-pruning">https://scikit-learn.org/stable/modules/tree.html#minimal-cost-complexity-pruning</a></p></li>
<li><p><strong>train_size</strong> (<em>float</em><em> or </em><em>int</em><em>, </em><em>default=0.7</em>) – If float, should be between 0.0 and 1.0 and represent the proportion of the dataset
to include in the train split. If int, represents the absolute number of train samples.</p></li>
<li><p><strong>num_iter</strong> (<em>int</em><em>, </em><em>default=50</em>) – Number of iterations to repeat Trustee inner-loop for.</p></li>
<li><p><strong>num_stability_iter</strong> (<em>int</em><em>, </em><em>default=5</em>) – Number of stability to repeat Trustee stabilization outer-loop for.</p></li>
<li><p><strong>num_samples</strong> (<em>int</em><em>, </em><em>default=2000</em>) – The absolute number of samples to fetch from the training dataset split to train the
student decision tree model. If the <cite>samples_size</cite> argument is provided, this arg is
ignored.</p></li>
<li><p><strong>samples_size</strong> (<em>float</em><em>, </em><em>default=None</em>) – The fraction of the training dataset to use to train the student decision tree model.
If None, the value is automatically set to the <cite>num_samples</cite> provided value.</p></li>
<li><p><strong>use_features</strong> (<em>array-like</em><em>, </em><em>default=None</em>) – Array-like of integers representing the indexes of features from the <cite>X</cite> training samples.
If not None, only the features indicated by the provided indexes will be used to train the
student decision tree model.</p></li>
<li><p><strong>predict_method_name</strong> (<em>str</em><em>, </em><em>default=&quot;predict&quot;</em>) – The method interface to use to get predictions from the expert model.
If no value is passed, the default <cite>predict</cite> interface is used.</p></li>
<li><p><strong>optimization</strong> (<em>{&quot;fidelity&quot;</em><em>, </em><em>&quot;accuracy&quot;}</em><em>, </em><em>default=&quot;fidelity&quot;</em>) – The comparison criteria to optimize the decision tree students in Trustee inner-loop.
Used for ablation study only.</p></li>
<li><p><strong>aggregate</strong> (<em>bool</em><em>, </em><em>default=True</em>) – Boolean indicating whether dataset aggregation should be used in Trustee inner-loop.
Used for ablation study only.</p></li>
<li><p><strong>verbose</strong> (<em>bool</em><em>, </em><em>default=False</em>) – Boolean indicating whether to log messages.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.RegressionTrustee.get_all_students">
<span class="sig-name descname"><span class="pre">get_all_students</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.RegressionTrustee.get_all_students" title="Permalink to this definition">#</a></dt>
<dd><p>Get list of all (student, reward) obtained during the inner-loop process.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><p><strong>students_by_iter</strong> – Matrix with all student models trained during <cite>fit()</cite>.</p>
<ul class="simple">
<li><dl class="simple">
<dt>dt: {DecisionTreeClassifier, DecisionTreeRegressor}</dt><dd><p>Unconstrained fitted student model.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>reward: float</dt><dd><p>Fidelity of student model to the expert model.</p>
</dd>
</dl>
</li>
</ul>
</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>array-like of shape (num_stability_iter, num_iter) of tuple (dt, reward)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.RegressionTrustee.get_leaves_by_level">
<span class="sig-name descname"><span class="pre">get_leaves_by_level</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.RegressionTrustee.get_leaves_by_level" title="Permalink to this definition">#</a></dt>
<dd><p>Returns number of leaves by level of the best student.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>leaves_by_level</strong> – Dict of leaves by level. {“&lt;level&gt;(int)”: &lt;leaves&gt;(int)}</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>dict of int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.RegressionTrustee.get_n_classes">
<span class="sig-name descname"><span class="pre">get_n_classes</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.RegressionTrustee.get_n_classes" title="Permalink to this definition">#</a></dt>
<dd><p>Returns number of classes used in the top student model.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>n_classes</strong> – Number of classes outputted in top student model.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.RegressionTrustee.get_n_features">
<span class="sig-name descname"><span class="pre">get_n_features</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.RegressionTrustee.get_n_features" title="Permalink to this definition">#</a></dt>
<dd><p>Returns number of features used in the top student model.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>n_features</strong> – Number of features used in top student model.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.RegressionTrustee.get_samples_by_level">
<span class="sig-name descname"><span class="pre">get_samples_by_level</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.RegressionTrustee.get_samples_by_level" title="Permalink to this definition">#</a></dt>
<dd><p>Get number of samples by level of the best student.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>samples_by_level</strong> – Dict of samples by level. {“&lt;level&gt;(int)”: &lt;samples&gt;(int)}</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>dict of int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.RegressionTrustee.get_samples_sum">
<span class="sig-name descname"><span class="pre">get_samples_sum</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.RegressionTrustee.get_samples_sum" title="Permalink to this definition">#</a></dt>
<dd><p>Get the sum of all samples in all non-leaf _nodes in best student model.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>samples_sum</strong> – Sum of all samples covered by non-leaf nodes in top student model.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.RegressionTrustee.get_stable">
<span class="sig-name descname"><span class="pre">get_stable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">top_k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.9</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.RegressionTrustee.get_stable" title="Permalink to this definition">#</a></dt>
<dd><p>Filters out explanations from Trustee stability analysis with less than threshold agreement.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>top_k</strong> (<em>int</em><em>, </em><em>default=10</em>) – Number of top-k branches, sorted by number of samples per branch, to keep after finding
decision tree with highest fidelity.</p></li>
<li><p><strong>threshold</strong> (<em>float</em><em>, </em><em>default=0.9</em>) – Remove any student decision tree explanation if their mean agreement goes below given threshold.
To keep all students regardless of mean agreement, pass 0.</p></li>
<li><p><strong>sort</strong> (<em>bool</em><em>, </em><em>default=True</em>) – Boolean indicating whether to sort returned stable student explanation based on mean agreement.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p><strong>stable_explanations</strong> – [(dt, pruned_dt, agreement, reward), …]</p>
<ul class="simple">
<li><dl class="simple">
<dt>dt: {DecisionTreeClassifier, DecisionTreeRegressor}</dt><dd><p>Unconstrained fitted student model.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>pruned_dt: {DecisionTreeClassifier, DecisionTreeRegressor}</dt><dd><p>Top-k pruned fitted student model.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>agreement: float</dt><dd><p>Mean agreement of pruned student model with respect to others.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>reward: float</dt><dd><p>Fidelity of student model to the expert model.</p>
</dd>
</dl>
</li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>array-like of tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.RegressionTrustee.get_top_branches">
<span class="sig-name descname"><span class="pre">get_top_branches</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">top_k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.RegressionTrustee.get_top_branches" title="Permalink to this definition">#</a></dt>
<dd><p>Returns list of top-k _branches of the best student, sorted by the number of samples the branch classifies.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>top_k</strong> (<em>int</em><em>, </em><em>default=10</em>) – Number of top-k branches, sorted by number of samples per branch, to return.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p><strong>top_branches</strong> – Dict of top-k branches from top student model.</p>
<ul class="simple">
<li><p>dict: { “level”: int, “path”: array-like of dict, “class”: int, “prob”: float, “samples”: int}</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>array-like of dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.RegressionTrustee.get_top_features">
<span class="sig-name descname"><span class="pre">get_top_features</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">top_k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.RegressionTrustee.get_top_features" title="Permalink to this definition">#</a></dt>
<dd><p>Get list of top _features of the best student, sorted by the number of samples the feature is used to classify.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>top_k</strong> (<em>int</em><em>, </em><em>default=10</em>) – Number of top-k features, sorted by number of samples per branch, to return.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p><strong>top_features</strong> – List of top-k features from top student model.</p>
<ul class="simple">
<li><p>dict {“&lt;feature&gt;(int)” : {“count”: int”samples”: int}}</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>array-like of dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.RegressionTrustee.get_top_nodes">
<span class="sig-name descname"><span class="pre">get_top_nodes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">top_k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.RegressionTrustee.get_top_nodes" title="Permalink to this definition">#</a></dt>
<dd><p>Returns list of top _nodes of the best student, sorted by the proportion of samples split by each node.</p>
<dl class="simple">
<dt>The proportion of samples is calculated based on the impurity decrease equation is the following::</dt><dd><p>n_samples * abs(left_impurity - right_impurity)</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>top_k</strong> (<em>int</em><em>, </em><em>default=10</em>) – Number of top-k nodes, sorted by number of samples per branch, to return.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p><strong>top_nodes</strong> – List of top-k nodes from top student model.</p>
<ul class="simple">
<li><dl class="simple">
<dt>dict: {“idx”: int, “level”: int, “feature”: int, “threshold”: float, “samples”: int,</dt><dd><p>”values”: tuple of int, “gini_split”: tuple of float, “data_split”: tuple of float,
“data_split_by_class”: array-like of tuple of float}</p>
</dd>
</dl>
</li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>array-like of dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.RegressionTrustee.get_top_students">
<span class="sig-name descname"><span class="pre">get_top_students</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.RegressionTrustee.get_top_students" title="Permalink to this definition">#</a></dt>
<dd><p>Get list of top (students, reward) obtained during the outer-loop process.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><p><strong>top_students</strong> – List with top student models trained during <cite>fit()</cite>.</p>
<ul class="simple">
<li><dl class="simple">
<dt>dt: {DecisionTreeClassifier, DecisionTreeRegressor}</dt><dd><p>Unconstrained fitted student model.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>reward: float</dt><dd><p>Fidelity of student model to the expert model.</p>
</dd>
</dl>
</li>
</ul>
</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>array-like of shape (num_stability_iter,) of tuple (dt, reward)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.RegressionTrustee.prune">
<span class="sig-name descname"><span class="pre">prune</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">top_k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_impurity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.RegressionTrustee.prune" title="Permalink to this definition">#</a></dt>
<dd><p>Prunes and returns the best student model explanation from the list of _students_by_iter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>top_k</strong> (<em>int</em><em>, </em><em>default=10</em>) – Number of top-k branches, sorted by number of samples per branch, to return.</p></li>
<li><p><strong>max_impurity</strong> (<em>float</em><em>, </em><em>default=0.10</em>) – Maximum impurity allowed in a branch. Will prune anything below that impurity level.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>top_k_pruned_student</strong> – Top-k pruned best fitted student model.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>{DecisionTreeClassifier, DecisionTreeRegressor}</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="trustee.main.Trustee">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">trustee.main.</span></span><span class="sig-name descname"><span class="pre">Trustee</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expert</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">student_class</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.Trustee" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">ABC</span></code></p>
<p>Base implementation the Trust-oriented Decision Tree Extraction (Trustee)
algorithm to train student model based on observations from an Expert model.</p>
<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.Trustee.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expert</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">student_class</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.Trustee.__init__" title="Permalink to this definition">#</a></dt>
<dd><p>Trustee constructor.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>expert</strong> (<em>object</em>) – The ML blackbox model to analyze. The expert model must have a <cite>predict</cite> method call implemented for
Trustee to work properly, unless explicitly stated otherwise using the <cite>predict_method_name</cite> argument
in the fit() method.</p></li>
<li><p><strong>student_class</strong> (<em>Class</em>) – Class of student to train based on blackbox model predictions. The given Class must implement a <cite>fit()
and a `predict()</cite> method interface for Trustee to work properly. The current implementation has been
tested using the DecisionTreeClassifier and DecisionTreeRegressor from scikit-learn.</p></li>
<li><p><strong>logger</strong> (<em>Logger object</em><em> , </em><em>default=None</em>) – A logger object to log messages to. If none is given, the print() method will be used to log messages.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.Trustee.explain">
<span class="sig-name descname"><span class="pre">explain</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">top_k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.Trustee.explain" title="Permalink to this definition">#</a></dt>
<dd><p>Returns explainable model that best imitates Expert model, based on highest mean agreement and highest fidelity.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><p><strong>top_student</strong> – (dt, pruned_dt, agreement, reward)</p>
<ul class="simple">
<li><dl class="simple">
<dt>dt: {DecisionTreeClassifier, DecisionTreeRegressor}</dt><dd><p>Unconstrained fitted student model.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>pruned_dt: {DecisionTreeClassifier, DecisionTreeRegressor}</dt><dd><p>Top-k pruned fitted student model.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>agreement: float</dt><dd><p>Mean agreement of pruned student model with respect to others.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>reward: float</dt><dd><p>Fidelity of student model to the expert model.</p>
</dd>
</dl>
</li>
</ul>
</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.Trustee.fit">
<span class="sig-name descname"><span class="pre">fit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">top_k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_leaf_nodes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ccp_alpha</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.7</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_iter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_stability_iter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_samples</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2000</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">samples_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_features</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">predict_method_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'predict'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optimization</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'fidelity'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aggregate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.Trustee.fit" title="Permalink to this definition">#</a></dt>
<dd><p>Trains Decision Tree Regressor to imitate Expert model.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>X</strong> (<em>{array-like</em><em>, </em><em>sparse matrix} of shape</em><em> (</em><em>n_samples</em><em>, </em><em>n_features</em><em>)</em>) – The training input samples. Internally, it will be converted to a pandas DataFrame.</p></li>
<li><p><strong>y</strong> (<em>array-like of shape</em><em> (</em><em>n_samples</em><em>,</em><em>) or </em><em>(</em><em>n_samples</em><em>, </em><em>n_outputs</em><em>)</em>) – The target values for X (class labels in classification, real numbers in regression).
Internally, it will be converted to a pandas Series.</p></li>
<li><p><strong>top_k</strong> (<em>int</em><em>, </em><em>default=10</em>) – Number of top-k branches, sorted by number of samples per branch, to keep after finding
decision tree with highest fidelity.</p></li>
<li><p><strong>max_leaf_nodes</strong> (<em>int</em><em>, </em><em>default=None</em>) – Grow a tree with max_leaf_nodes in best-first fashion. Best nodes are defined as
relative reduction in impurity. If None then unlimited number of leaf nodes.</p></li>
<li><p><strong>max_depth</strong> (<em>int</em><em>, </em><em>default=None</em>) – The maximum depth of the tree. If None, then nodes are expanded until all leaves are pure.</p></li>
<li><p><strong>ccp_alpha</strong> (<em>float</em><em>, </em><em>default=0.0</em>) – Complexity parameter used for Minimal Cost-Complexity Pruning. The subtree with the
largest cost complexity that is smaller than ccp_alpha will be chosen. By default,
no pruning is performed. See Minimal Cost-Complexity Pruning here for details:
<a class="reference external" href="https://scikit-learn.org/stable/modules/tree.html#minimal-cost-complexity-pruning">https://scikit-learn.org/stable/modules/tree.html#minimal-cost-complexity-pruning</a></p></li>
<li><p><strong>train_size</strong> (<em>float</em><em> or </em><em>int</em><em>, </em><em>default=0.7</em>) – If float, should be between 0.0 and 1.0 and represent the proportion of the dataset
to include in the train split. If int, represents the absolute number of train samples.</p></li>
<li><p><strong>num_iter</strong> (<em>int</em><em>, </em><em>default=50</em>) – Number of iterations to repeat Trustee inner-loop for.</p></li>
<li><p><strong>num_stability_iter</strong> (<em>int</em><em>, </em><em>default=5</em>) – Number of stability to repeat Trustee stabilization outer-loop for.</p></li>
<li><p><strong>num_samples</strong> (<em>int</em><em>, </em><em>default=2000</em>) – The absolute number of samples to fetch from the training dataset split to train the
student decision tree model. If the <cite>samples_size</cite> argument is provided, this arg is
ignored.</p></li>
<li><p><strong>samples_size</strong> (<em>float</em><em>, </em><em>default=None</em>) – The fraction of the training dataset to use to train the student decision tree model.
If None, the value is automatically set to the <cite>num_samples</cite> provided value.</p></li>
<li><p><strong>use_features</strong> (<em>array-like</em><em>, </em><em>default=None</em>) – Array-like of integers representing the indexes of features from the <cite>X</cite> training samples.
If not None, only the features indicated by the provided indexes will be used to train the
student decision tree model.</p></li>
<li><p><strong>predict_method_name</strong> (<em>str</em><em>, </em><em>default=&quot;predict&quot;</em>) – The method interface to use to get predictions from the expert model.
If no value is passed, the default <cite>predict</cite> interface is used.</p></li>
<li><p><strong>optimization</strong> (<em>{&quot;fidelity&quot;</em><em>, </em><em>&quot;accuracy&quot;}</em><em>, </em><em>default=&quot;fidelity&quot;</em>) – The comparison criteria to optimize the decision tree students in Trustee inner-loop.
Used for ablation study only.</p></li>
<li><p><strong>aggregate</strong> (<em>bool</em><em>, </em><em>default=True</em>) – Boolean indicating whether dataset aggregation should be used in Trustee inner-loop.
Used for ablation study only.</p></li>
<li><p><strong>verbose</strong> (<em>bool</em><em>, </em><em>default=False</em>) – Boolean indicating whether to log messages.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.Trustee.get_all_students">
<span class="sig-name descname"><span class="pre">get_all_students</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.Trustee.get_all_students" title="Permalink to this definition">#</a></dt>
<dd><p>Get list of all (student, reward) obtained during the inner-loop process.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><p><strong>students_by_iter</strong> – Matrix with all student models trained during <cite>fit()</cite>.</p>
<ul class="simple">
<li><dl class="simple">
<dt>dt: {DecisionTreeClassifier, DecisionTreeRegressor}</dt><dd><p>Unconstrained fitted student model.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>reward: float</dt><dd><p>Fidelity of student model to the expert model.</p>
</dd>
</dl>
</li>
</ul>
</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>array-like of shape (num_stability_iter, num_iter) of tuple (dt, reward)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.Trustee.get_leaves_by_level">
<span class="sig-name descname"><span class="pre">get_leaves_by_level</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.Trustee.get_leaves_by_level" title="Permalink to this definition">#</a></dt>
<dd><p>Returns number of leaves by level of the best student.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>leaves_by_level</strong> – Dict of leaves by level. {“&lt;level&gt;(int)”: &lt;leaves&gt;(int)}</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>dict of int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.Trustee.get_n_classes">
<span class="sig-name descname"><span class="pre">get_n_classes</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.Trustee.get_n_classes" title="Permalink to this definition">#</a></dt>
<dd><p>Returns number of classes used in the top student model.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>n_classes</strong> – Number of classes outputted in top student model.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.Trustee.get_n_features">
<span class="sig-name descname"><span class="pre">get_n_features</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.Trustee.get_n_features" title="Permalink to this definition">#</a></dt>
<dd><p>Returns number of features used in the top student model.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>n_features</strong> – Number of features used in top student model.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.Trustee.get_samples_by_level">
<span class="sig-name descname"><span class="pre">get_samples_by_level</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.Trustee.get_samples_by_level" title="Permalink to this definition">#</a></dt>
<dd><p>Get number of samples by level of the best student.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>samples_by_level</strong> – Dict of samples by level. {“&lt;level&gt;(int)”: &lt;samples&gt;(int)}</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>dict of int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.Trustee.get_samples_sum">
<span class="sig-name descname"><span class="pre">get_samples_sum</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.Trustee.get_samples_sum" title="Permalink to this definition">#</a></dt>
<dd><p>Get the sum of all samples in all non-leaf _nodes in best student model.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>samples_sum</strong> – Sum of all samples covered by non-leaf nodes in top student model.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.Trustee.get_stable">
<span class="sig-name descname"><span class="pre">get_stable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">top_k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.9</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sort</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.Trustee.get_stable" title="Permalink to this definition">#</a></dt>
<dd><p>Filters out explanations from Trustee stability analysis with less than threshold agreement.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>top_k</strong> (<em>int</em><em>, </em><em>default=10</em>) – Number of top-k branches, sorted by number of samples per branch, to keep after finding
decision tree with highest fidelity.</p></li>
<li><p><strong>threshold</strong> (<em>float</em><em>, </em><em>default=0.9</em>) – Remove any student decision tree explanation if their mean agreement goes below given threshold.
To keep all students regardless of mean agreement, pass 0.</p></li>
<li><p><strong>sort</strong> (<em>bool</em><em>, </em><em>default=True</em>) – Boolean indicating whether to sort returned stable student explanation based on mean agreement.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p><strong>stable_explanations</strong> – [(dt, pruned_dt, agreement, reward), …]</p>
<ul class="simple">
<li><dl class="simple">
<dt>dt: {DecisionTreeClassifier, DecisionTreeRegressor}</dt><dd><p>Unconstrained fitted student model.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>pruned_dt: {DecisionTreeClassifier, DecisionTreeRegressor}</dt><dd><p>Top-k pruned fitted student model.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>agreement: float</dt><dd><p>Mean agreement of pruned student model with respect to others.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>reward: float</dt><dd><p>Fidelity of student model to the expert model.</p>
</dd>
</dl>
</li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>array-like of tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.Trustee.get_top_branches">
<span class="sig-name descname"><span class="pre">get_top_branches</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">top_k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.Trustee.get_top_branches" title="Permalink to this definition">#</a></dt>
<dd><p>Returns list of top-k _branches of the best student, sorted by the number of samples the branch classifies.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>top_k</strong> (<em>int</em><em>, </em><em>default=10</em>) – Number of top-k branches, sorted by number of samples per branch, to return.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p><strong>top_branches</strong> – Dict of top-k branches from top student model.</p>
<ul class="simple">
<li><p>dict: { “level”: int, “path”: array-like of dict, “class”: int, “prob”: float, “samples”: int}</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>array-like of dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.Trustee.get_top_features">
<span class="sig-name descname"><span class="pre">get_top_features</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">top_k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.Trustee.get_top_features" title="Permalink to this definition">#</a></dt>
<dd><p>Get list of top _features of the best student, sorted by the number of samples the feature is used to classify.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>top_k</strong> (<em>int</em><em>, </em><em>default=10</em>) – Number of top-k features, sorted by number of samples per branch, to return.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p><strong>top_features</strong> – List of top-k features from top student model.</p>
<ul class="simple">
<li><p>dict {“&lt;feature&gt;(int)” : {“count”: int”samples”: int}}</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>array-like of dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.Trustee.get_top_nodes">
<span class="sig-name descname"><span class="pre">get_top_nodes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">top_k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.Trustee.get_top_nodes" title="Permalink to this definition">#</a></dt>
<dd><p>Returns list of top _nodes of the best student, sorted by the proportion of samples split by each node.</p>
<dl class="simple">
<dt>The proportion of samples is calculated based on the impurity decrease equation is the following::</dt><dd><p>n_samples * abs(left_impurity - right_impurity)</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>top_k</strong> (<em>int</em><em>, </em><em>default=10</em>) – Number of top-k nodes, sorted by number of samples per branch, to return.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><p><strong>top_nodes</strong> – List of top-k nodes from top student model.</p>
<ul class="simple">
<li><dl class="simple">
<dt>dict: {“idx”: int, “level”: int, “feature”: int, “threshold”: float, “samples”: int,</dt><dd><p>”values”: tuple of int, “gini_split”: tuple of float, “data_split”: tuple of float,
“data_split_by_class”: array-like of tuple of float}</p>
</dd>
</dl>
</li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>array-like of dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.Trustee.get_top_students">
<span class="sig-name descname"><span class="pre">get_top_students</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.Trustee.get_top_students" title="Permalink to this definition">#</a></dt>
<dd><p>Get list of top (students, reward) obtained during the outer-loop process.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><p><strong>top_students</strong> – List with top student models trained during <cite>fit()</cite>.</p>
<ul class="simple">
<li><dl class="simple">
<dt>dt: {DecisionTreeClassifier, DecisionTreeRegressor}</dt><dd><p>Unconstrained fitted student model.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>reward: float</dt><dd><p>Fidelity of student model to the expert model.</p>
</dd>
</dl>
</li>
</ul>
</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>array-like of shape (num_stability_iter,) of tuple (dt, reward)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.main.Trustee.prune">
<span class="sig-name descname"><span class="pre">prune</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">top_k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_impurity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#trustee.main.Trustee.prune" title="Permalink to this definition">#</a></dt>
<dd><p>Prunes and returns the best student model explanation from the list of _students_by_iter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>top_k</strong> (<em>int</em><em>, </em><em>default=10</em>) – Number of top-k branches, sorted by number of samples per branch, to return.</p></li>
<li><p><strong>max_impurity</strong> (<em>float</em><em>, </em><em>default=0.10</em>) – Maximum impurity allowed in a branch. Will prune anything below that impurity level.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>top_k_pruned_student</strong> – Top-k pruned best fitted student model.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>{DecisionTreeClassifier, DecisionTreeRegressor}</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<span class="target" id="module-trustee.report.trust"></span><section id="trust-report">
<h2>Trust Report<a class="headerlink" href="#trust-report" title="Permalink to this heading">#</a></h2>
<p>The module that implements Trust Reports</p>
<dl class="py class">
<dt class="sig sig-object py" id="trustee.report.trust.TrustReport">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">trustee.report.trust.</span></span><span class="sig-name descname"><span class="pre">TrustReport</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">blackbox</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">X</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">X_train</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">X_test</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_train</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_test</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_iter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_pruning_iter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.7</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">predict_method_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'predict'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trustee_num_iter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trustee_num_stability_iter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trustee_sample_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trustee_max_leaf_nodes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trustee_max_depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trustee_ccp_alpha</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">analyze_branches</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">analyze_stability</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_retrain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">top_k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">class_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_classify</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_features</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#trustee.report.trust.TrustReport" title="Permalink to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Class to generate Trust Report.</p>
<dl class="py method">
<dt class="sig sig-object py" id="trustee.report.trust.TrustReport.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">blackbox</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">X</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">X_train</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">X_test</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_train</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y_test</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_iter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_pruning_iter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.7</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">predict_method_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'predict'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trustee_num_iter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trustee_num_stability_iter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trustee_sample_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trustee_max_leaf_nodes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trustee_max_depth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trustee_ccp_alpha</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">analyze_branches</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">analyze_stability</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skip_retrain</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">top_k</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logger</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">class_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature_names</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_classify</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_features</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#trustee.report.trust.TrustReport.__init__" title="Permalink to this definition">#</a></dt>
<dd><p>Builds Trust Report for given blackbox model using the Trustee method
to extract whitebox explanations as Decision Trees.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>blackbox</strong> (<em>object</em>) – The ML blackbox model to analyze. The expert model must have a <cite>predict</cite> method call implemented for
Trustee to work properly, unless explicitly stated otherwise using the <cite>predict_method_name</cite>.</p></li>
<li><p><strong>X</strong> (<em>{array-like</em><em>, </em><em>sparse matrix} of shape</em><em> (</em><em>n_samples</em><em>, </em><em>n_features</em><em>)</em>) – The training input samples. Internally, it will be converted to a pandas DataFrame.
Either (X, y) or (X_train, X_test, y_train, y_test) must be provided.</p></li>
<li><p><strong>y</strong> (<em>array-like of shape</em><em> (</em><em>n_samples</em><em>,</em><em>) or </em><em>(</em><em>n_samples</em><em>, </em><em>n_outputs</em><em>)</em>) – The target values for X (class labels in classification, real numbers in regression).
Internally, it will be converted to a pandas Series.
Either (X, y) or (X_train, X_test, y_train, y_test) must be provided.</p></li>
<li><p><strong>X_train</strong> (<em>{array-like</em><em>, </em><em>sparse matrix} of shape</em><em> (</em><em>n_samples</em><em>, </em><em>n_features</em><em>)</em>) – The training input samples. Internally, it will be converted to a pandas DataFrame.
Use this argument if a fixed train-test split is to be used.
Either (X, y) or (X_train, X_test, y_train, y_test) must be provided.</p></li>
<li><p><strong>X_test</strong> (<em>{array-like</em><em>, </em><em>sparse matrix} of shape</em><em> (</em><em>n_samples</em><em>, </em><em>n_features</em><em>)</em>) – The training input samples. Internally, it will be converted to a pandas DataFrame.
Use this argument if a fixed train-test split is to be used.
Either (X, y) or (X_train, X_test, y_train, y_test) must be provided.</p></li>
<li><p><strong>y_train</strong> (<em>array-like of shape</em><em> (</em><em>n_samples</em><em>,</em><em>) or </em><em>(</em><em>n_samples</em><em>, </em><em>n_outputs</em><em>)</em>) – The target values for X (class labels in classification, real numbers in regression).
Internally, it will be converted to a pandas Series.
Use this argument if a fixed train-test split is to be used.
Either (X, y) or (X_train, X_test, y_train, y_test) must be provided.</p></li>
<li><p><strong>y</strong> – The target values for X (class labels in classification, real numbers in regression).
Internally, it will be converted to a pandas Series.
Use this argument if a fixed train-test split is to be used.
Either (X, y) or (X_train, X_test, y_train, y_test) must be provided.</p></li>
<li><p><strong>max_iter</strong> (<em>int</em><em>, </em><em>default=10</em>) – Number of iterations to repeat several analyses in the Trust Report,
including feature removal and branch analysis.</p></li>
<li><p><strong>num_pruning_iter</strong> (<em>int</em><em>, </em><em>default=10</em>) – Number of iterations to repeat the pruning analysis.</p></li>
<li><p><strong>train_size</strong> (<em>float</em><em> or </em><em>int</em><em>, </em><em>default=0.7</em>) – If float, should be between 0.0 and 1.0 and represent the proportion of the dataset
to include in the train split. If int, represents the absolute number of train samples.</p></li>
<li><p><strong>predict_method_name</strong> (<em>str</em><em>, </em><em>default=&quot;predict&quot;</em>) – The method interface to use to get predictions from the expert model.
If no value is passed, the default <cite>predict</cite> interface is used.</p></li>
<li><p><strong>trustee_num_iter</strong> (<em>int</em><em>, </em><em>default=50</em>) – Number of iterations to repeat Trustee inner-loop for.</p></li>
<li><p><strong>trustee_num_stability_iter</strong> (<em>int</em><em>, </em><em>default=5</em>) – Number of stability to repeat Trustee stabilization outer-loop for.</p></li>
<li><p><strong>trustee_samples_size</strong> (<em>float</em><em>, </em><em>default=None</em>) – The fraction of the training dataset to use to train the student decision tree model.
If None, the value is automatically set to the <cite>num_samples</cite> provided value.</p></li>
<li><p><strong>trustee_max_leaf_nodes</strong> (<em>int</em><em>, </em><em>default=None</em>) – Grow a tree with max_leaf_nodes in best-first fashion. Best nodes are defined as
relative reduction in impurity. If None then unlimited number of leaf nodes.</p></li>
<li><p><strong>trustee_max_depth</strong> (<em>int</em><em>, </em><em>default=None</em>) – The maximum depth of the tree. If None, then nodes are expanded until all leaves are pure.</p></li>
<li><p><strong>trustee_ccp_alpha</strong> (<em>float</em><em>, </em><em>default=0.0</em>) – Complexity parameter used for Minimal Cost-Complexity Pruning. The subtree with the
largest cost complexity that is smaller than ccp_alpha will be chosen. By default,
no pruning is performed. See Minimal Cost-Complexity Pruning here for details:
<a class="reference external" href="https://scikit-learn.org/stable/modules/tree.html#minimal-cost-complexity-pruning">https://scikit-learn.org/stable/modules/tree.html#minimal-cost-complexity-pruning</a></p></li>
<li><p><strong>analyze_branches</strong> (<em>bool</em><em>, </em><em>default=False</em>) – Boolean indicating whether to perform the Trust Report branch analysis of Trustee explanations.</p></li>
<li><p><strong>analyze_stability</strong> (<em>bool</em><em>, </em><em>default=False</em>) – Boolean indicating whether to perform the Trust Report stability analysis of Trustee explanations.</p></li>
<li><p><strong>skip_retrain</strong> (<em>bool</em><em>, </em><em>default=False</em>) – Boolean indicating whether the Trust Report should attempt to retrain the given blackbox model.
Used to evaluate the impact of each feature in training by iteratively removing top features.
Works well for scikit-explain model, but can be troublesome for other libraries (especially AutoGluon).</p></li>
<li><p><strong>top_k</strong> (<em>int</em><em>, </em><em>default=10</em>) – Number of top-k branches, sorted by number of samples per branch, to keep after finding
decision tree with highest fidelity.</p></li>
<li><p><strong>verbose</strong> (<em>bool</em><em>, </em><em>default=False</em>) – Boolean indicating whether to log messages.</p></li>
<li><p><strong>logger</strong> (<em>Logger object</em><em> , </em><em>default=None</em>) – A logger object to log messages to. If none is given, the print() method will be used to log messages.</p></li>
<li><p><strong>class_names</strong> (<em>array-like of str</em><em>, </em><em>default=None</em>) – List of class names to use when plotting decision trees and graphs.</p></li>
<li><p><strong>feature_names</strong> (<em>array-like of str</em><em>, </em><em>default=None</em><em>,</em>) – List of feature names to use when plotting decision trees and graphs.</p></li>
<li><p><strong>is_classify</strong> (<em>bool</em><em>, </em><em>default=True</em><em>,</em>) – Whether given blackbox is a classifier or regressor. The outputted plots change depending on chosen value.</p></li>
<li><p><strong>use_features</strong> (<em>array-like</em><em>, </em><em>default=None</em>) – Array-like of integers representing the indexes of features from the <cite>X</cite> training samples.
If not None, only the features indicated by the provided indexes will be used to train the
student decision tree model.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.report.trust.TrustReport.load">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">load</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#trustee.report.trust.TrustReport.load" title="Permalink to this definition">#</a></dt>
<dd><p>Load the Trust Report from a file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>) – The path to the file.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>report</strong> – Loaded Trust Report from file.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#trustee.report.trust.TrustReport" title="trustee.report.trust.TrustReport">TrustReport</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.report.trust.TrustReport.plot">
<span class="sig-name descname"><span class="pre">plot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aggregate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#trustee.report.trust.TrustReport.plot" title="Permalink to this definition">#</a></dt>
<dd><p>Plot the analysis results.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>output_dir</strong> (<em>str</em>) – The output directory to save the plots.</p></li>
<li><p><strong>aggregate</strong> (<em>bool</em><em>, </em><em>default=False</em>) – Whether to attempt to aggregate most important features based on the values seen in the data and branches.
Does not always work properly, but can be useful to analyze the given dataset.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="trustee.report.trust.TrustReport.save">
<span class="sig-name descname"><span class="pre">save</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aggregate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_all_dts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#trustee.report.trust.TrustReport.save" title="Permalink to this definition">#</a></dt>
<dd><p>Saves report and plots to output dir</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>output_dir</strong> (<em>str</em>) – The output directory to save the plots.</p></li>
<li><p><strong>aggregate</strong> (<em>bool</em><em>, </em><em>default=False</em>) – Whether to attempt to aggregate most important features based on the values seen in the data and branches.
Does not always work properly, but can be useful to analyze the given dataset.</p></li>
<li><p><strong>save_all_dts</strong> (<em>bool</em><em>, </em><em>default=False</em>) – Whether to save all generated decision trees or just the main explanation.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="trustee.report.trust.TrustReport.step">
<span class="sig-name descname"><span class="pre">step</span></span><a class="headerlink" href="#trustee.report.trust.TrustReport.step" title="Permalink to this definition">#</a></dt>
<dd><p>Used for progress bar.</p>
<dl class="simple">
<dt>total_steps =</dt><dd><p>_prepare_data (1) +
_collect_blackbox (1) +
_collect_trustee (1) +
_collect_top_k_prunning (1) +
_collect_ccp_prunning (num_pruning_iter) +
_collect_max_depth_prunning (num_pruning_iter) +
_collect_max_leaves_prunning (num_pruning_iter) +
_collect_features_iter_removal (max_iter)</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="trustee.report.trust.TrustReport.total_steps">
<span class="sig-name descname"><span class="pre">total_steps</span></span><a class="headerlink" href="#trustee.report.trust.TrustReport.total_steps" title="Permalink to this definition">#</a></dt>
<dd><p>if analyze_branches:
total_steps += _collect_branch_analysis (num_leaves = trustee_max_leaf_nodes or guess 100)</p>
</dd></dl>

</dd></dl>

</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="auto_examples/index.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Examples</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="index.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Home</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024,  Arthur Selle Jacobs
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link " href="https://github.com/TrusteeML/trustee" aria-label="GitHub">
                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
                </svg>
            </a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">API</a><ul>
<li><a class="reference internal" href="#trustee">Trustee</a></li>
<li><a class="reference internal" href="#trust-report">Trust Report</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div>
<script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/scripts/furo.js"></script>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7V01G11HVE"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() { dataLayer.push(arguments); }
  gtag('js', new Date());

  gtag('config', 'G-7V01G11HVE');
</script>
</body>
</html>